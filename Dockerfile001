# Use the official busybox image as the base image
FROM busybox:latest

# Install necessary packages
RUN mkdir -p /var/lib/dpkg \
    && touch /var/lib/dpkg/status \
    && mkdir -p /rootfs \
    && wget http://ftp.debian.org/debian/pool/main/d/debootstrap/debootstrap_1.0.134_all.deb -O /tmp/debootstrap.deb \
    && busybox dpkg -i /tmp/debootstrap.deb \
    && busybox debootstrap --variant=minbase --arch=amd64 focal /rootfs http://archive.ubuntu.com/ubuntu/ \
    && busybox chroot /rootfs /bin/sh -c "apt-get update && apt-get install -y net-tools dnsutils iputils-ping iproute2" \
    && cp -a /rootfs/bin /rootfs/sbin /rootfs/usr /rootfs/lib / \
    && rm -rf /rootfs \
    && busybox rm -rf /var/lib/apt/lists/* \
    && rm /tmp/debootstrap.deb

# Set the entrypoint to /bin/sh for an interactive shell
ENTRYPOINT ["/bin/sh"]
